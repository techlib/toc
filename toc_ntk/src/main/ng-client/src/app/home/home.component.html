<section>
  <div class="row app-toolbar app-clean-mg">
    <div class="col s2">
      <i *ngIf="state.foldername" class="app-mdi-folder"></i>
      {{state.foldername}}
    </div>
    <div class="col s10 right-align">
      <!--<button mz-button (click)="analyze()">analyze</button>-->
      <button mz-button (click)="rescore()">rescore</button>
      <button mz-button [disabled]="!hasToc" (click)="openToc()" >view toc</button>
      <button mz-button [disabled]="selected.length === 0" (click)="export()">export</button>
    </div>
  </div><!--/.row app-toolbar -->
  
  <div class="app-sroll-wrapper">
    <!-- Podminku na zobrazeni aplikuj na element s class "row" -->
    <div class="row">
      <div class="col s12">
        <form >
          <mz-input-container  [inline]="'true'">
            <input name="found" type="number" [(ngModel)]="scoreConfig.found" mz-input [label]="'Found'">
          </mz-input-container>
          <mz-input-container  [inline]="'true'">
            <input name="multiple" type="number" [(ngModel)]="scoreConfig.multiple" mz-input [label]="'Multiple'">
          </mz-input-container>
          <mz-input-container  [inline]="'true'">
            <input name="hasProperNoun" type="number" [(ngModel)]="scoreConfig.hasProperNoun" mz-input [label]="'Proper noun'">
          </mz-input-container>
          <br/>
          <mz-input-container  [inline]="'false'">
            <input name="matched" type="number" [(ngModel)]="scoreConfig.matched" mz-input [label]="'Matched'">
          </mz-input-container>
          <mz-input-container  [inline]="'true'" *ngFor="let d of scoreConfig.dicts">
            <input [id]="'dict_' + d" type="number" [name]="'dict_' + d" mz-input [label]="d" [(ngModel)]="scoreConfig.dictionaries[d]">
          </mz-input-container>
          <mz-input-container  [inline]="'true'">
            <input name="isDictionaryWord" type="number" [(ngModel)]="scoreConfig.isDictionaryWord" mz-input [label]="'isDictionaryWord'">
          </mz-input-container>
        </form>
      </div><!--/.col -->
    </div><!--/.row -->
    
    <div class="row">
      <div class="col s12">
        <mz-checkbox-container>
          <input mz-checkbox id="filter_matched" type="checkbox" [(ngModel)]="showMatched" label="Show matched">
        </mz-checkbox-container>
        <mz-checkbox-container>
          <input mz-checkbox id="filter_free" type="checkbox" [(ngModel)]="showFree"  label="Show not matched">
        </mz-checkbox-container>
      </div><!--/.col -->
    </div><!--/.row -->
    
    <div class="row">
      <div class="col s12">
        <h5>Candidates:</h5>
        <div class="app-spinner center-align">
          <mz-spinner *ngIf="loading" [size]="'small'"></mz-spinner>
        </div>
        <!--<table *ngIf="!loading" class="striped highlight" id="app-table-score">-->
        <table class="striped highlight" id="app-table-score">
          <thead>
            <tr>
              <th><span>&#160;</span></th>
              <th><span>score</span></th>
              <th><span>text</span></th>
              <th><span>type</span></th>
              <th><span>isMatched</span></th>
              <th><span>dictionaries</span></th>
              <th><span>hasProperNoun</span></th>
              <th><span>found</span></th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let c of candidates; let idx = index">
              <tr *ngIf="(showMatched && c.isMatched) || (showFree && !c.isMatched)">
                <td>
                  <mz-checkbox-container>
                    <input [id]="'ch_'+idx" type="checkbox" [(ngModel)]="c.selected" (change)="select()" mz-checkbox >
                  </mz-checkbox-container>
                </td>
                <!-- Dodrz prefix class, muze jich byt vice, tohle je jen priklad, barvy prahu se definuje ve variables -->
                <td 
                  [class.app-score-1]="c.score == '6.2'" 
                  [class.app-score-2]="c.score < '6'"
                  [class.app-score-3]="c.score < '5'"
                  [class.app-score-4]="c.score < '4'"
                >{{c.score | number: '1.1-3'}}</td>
                <td>{{c.text}}</td>
                <td>{{c.type}}</td>
                <td>{{c.isMatched}}</td>
                <td><ul><li *ngFor="let d of c.dictionaries">{{d.text}} - {{d.name}}</li></ul></td>
                <td>{{c.hasProperNoun}}</td>
                <td>{{c.found}}</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div><!--/.col -->
    </div><!--/.row -->
  </div><!--/.app-sroll-wrapper -->
</section>  
  

<!-- Modals -->
<mz-modal #tocModal [fixedFooter]="true"  >
  <mz-modal-header>{{state.foldername}}</mz-modal-header>
  <mz-modal-content>
    <div class="input-field col s12">
      <textarea id="textarea1" class="materialize-textarea" style="height: 100vh;">{{toc_text}}</textarea>
    </div>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close>close</button>
  </mz-modal-footer>
</mz-modal>

<mz-modal #exportModal [fixedFooter]="true"  >
  <mz-modal-header>Exported candidates</mz-modal-header>
  <mz-modal-content>
    <div class="input-field col s12">
      <textarea id="textarea1" class="materialize-textarea" style="height: 100vh;">{{exported}}</textarea>
    </div>
  </mz-modal-content>
  <mz-modal-footer>
    <button mz-button [flat]="true" mz-modal-close>close</button>
  </mz-modal-footer>
</mz-modal>
<!-- end Modals -->
  
